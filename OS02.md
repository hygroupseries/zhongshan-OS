操作系统02



M.A.L.H原则

模块化（Modularity）

- 分治法
- 高内聚和低耦合

抽象（Abstract）

- 接口与内部实现
- 像C++类

分层（Layering）

- 模块化 + 抽象  强调层内完整性

层级（Hierarchy）

- 天然的包含关系
- 强调包含



宏内核

整个系统分为内核与应用两层

- 内核 ： 运行在特权级， 集中控制所有计算资源

- 应用 ： 运行在非特权级， 受内核管理， 使用内核服务

  

结构性缺陷

- 安全性与可靠性问题：模块之间没有很强的隔离机制
- 实时性支持：系统太复杂导致无法作最坏情况时延分析

宏内核难以满足的场景

向上向下的扩展 难以剪裁和扩展

硬件异构性

功能安全

信息安全  单点错误导致整个系统出错

确定性时延



微内核的系统架构

设计原则 ： 最小化内核功能

将操作系统功能移到用户态， 称为服务 Server

在用户模块之间，使用消息传递机制通信（进程间通信 IPC）



微内核的优缺点

优点：

易于扩展： 直接添加一个用户进程即可为操作系统增加服务

易于移植：大部分模块与底层硬件无关

缺点

性能较差：内核中的模块交互由函数调用变成了进程间通信

生态欠缺：未形成开发者社区



混合内核架构

将需要性能的模块重新放回内核态



外核架构（Exokernel） + 库OS（LibOS）

只负责调度

策略与机制分离

高度定制化

更高性能

Exokernel 不提供硬件抽象 以实现性能最大化

不管理资源，只管理应用

负责将计算资源与应用的绑定，以及资源的回收

保证多个应用之间的隔离



多内核/复内核（Multikernel）

默认的状态是划分而不是共享

维持多份状态的copy而不是共享一份状态

OS 是分布式系统

seL4 形式化证明无Bug的微内核

QNX RTOS

MINIX

LINUX